import glob

Import('env')

ROOT = Dir('#')
CFILES = glob.glob(f'{ROOT}/**/*.c', recursive=True)
HFILES = glob.glob(f'{ROOT}/**/*.h', recursive=True)

# Generate object files from source files
objs = [env.Object(target=f'{ROOT}/build/objs/{File(file).name[:-2]}.o', source=file) for file in CFILES]

# Generate the binary in the build/bin directory
binary = env.Program(target=f'{ROOT}/build/bin/BLDC_control', source=objs)
